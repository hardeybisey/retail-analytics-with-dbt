version: 2

models:
  - name: stg_order_items
    description: ""
    config:
      contract:
        enforced: True
    columns:
      - name: order_id
        description: "unique identifier for each order"
        data_type: varchar
        constraints:
          - type: not_null
          - type: unique

      - name: order_item_id
        description: "ID denoting the sequence of item in an order"
        data_type: integer
        constraints:
          - type: not_null

      - name: product_id
        description: "product identifier for each item in the order"
        data_type: varchar
        constraints:
          - type: not_null
          - type: foreign_key
            to: ref('snapshot_products')
            to_columns: [product_id]

      - name: seller_id
        description: "unique identifier for seller who fulfilled the order"
        data_type: varchar
        constraints:
          - type: not_null

      - name: shipping_limit_date
        description: "System generated exepected shipping date for the item "
        data_type: date

      - name: item_value
        data_type: float
        description: ""
        constraints:
          - type: not_null

      - name: freight_value
        description: "Shipping amount for each item in the order."
        data_type: float
        constraints:
          - type: not_null

  - name: stg_orders
    description: ""
    config:
      contract:
        enforced: True
    columns:
      - name: order_id
        data_type: varchar
        description: "unique identifier for each order"
        constraints:
          - type: unique
          - type: not_null

      - name: customer_id
        data_type: varchar
        description: "unique identifier for customer who placed the order"
        constraints:
          - type: not_null
          - type: foreign_key
            to: ref('snapshot_customers')
            to_columns: [customer_id]

      - name: order_status
        data_type: text
        description: "status of the order"
        constraints:
          - type: not_null
          - type: check
            expression: "order_status in ('PROCESSING', 'APPROVED', 'SHIPPED', 'DELIVERED')"

      - name: order_date
        data_type: date
        description: ""
        constraints:
          - type: not_null

      - name: order_approved_date
        data_type: date
        description: ""

      - name: delivered_to_carrier_date
        data_type: date
        description: ""

      - name: delivered_to_customer_date
        data_type: date
        description: ""

      - name: estimated_delivery_date
        data_type: date
        description: ""
